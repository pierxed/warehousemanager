/* RESET BASE */
* { box-sizing:border-box; margin:0; padding:0; font-family:Arial,sans-serif; }
body{background:#f5f6fa; color:#2f3640;}
header{background:#40739e; color:white; padding:20px; text-align:center; font-size:1.8em; font-weight:bold; box-shadow:0 2px 6px rgba(0,0,0,0.2);}

/* MENU CENTRATO */
.tabs{
  display:flex;
  justify-content:center;
  gap:10px;
  padding:10px 20px;
  background:#dcdde1;
  border-radius:6px;
  flex-wrap:wrap;
}
.tab-btn{background:#40739e;color:white;border:none;padding:10px 15px;border-radius:6px;cursor:pointer;transition:0.1s;}
.tab-btn.active{background:#273c75;}
.tab-btn:hover{opacity:0.8;}

.container{max-width:1200px;margin:20px auto;padding:0 20px; display:grid; gap:22px;}

/* HOME spacing */
#tab_home.tab.active{display:grid; gap:18px;}

/* CARD DASHBOARD */
.dashboard-cards{display:flex; flex-wrap:wrap; gap:20px; justify-content:space-between;}
.card{flex:1 1 30%;background:white;padding:20px;border-radius:10px;box-shadow:0 4px 12px rgba(0,0,0,0.1);text-align:center;transition:transform 0.2s,box-shadow 0.2s;}
.card h3{font-size:1.05em;margin-bottom:10px;}
.card p{font-size:2em;font-weight:bold;color:#40739e;}
.card:hover{transform:translateY(-5px);box-shadow:0 8px 20px rgba(0,0,0,0.15);}

/* SEZIONI */
.mini-table, .mini-chart, #tab_production, #tab_sale, #tab_stock, #tab_lots{
  background:white;padding:20px;border-radius:10px;box-shadow:0 4px 12px rgba(0,0,0,0.1);
}
.mini-table h2,.mini-chart h2,#tab_production h2,#tab_sale h2,#tab_stock h2,#tab_lots h2{margin-bottom:15px;color:#40739e;}
table{width:100%; border-collapse:collapse;}
th,td{padding:10px;text-align:left;border-bottom:1px solid #dcdde1;}
th{background:#f5f6fa;}
tr:hover{background:#f1f2f6;}

/* INPUT */
.form-group{margin-bottom:10px;}
.form-group label{display:block;margin-bottom:5px;}
input[type=text], input[type=number], input[type=date], select{width:100%;padding:8px;border-radius:6px;border:1px solid #dcdde1;}
button{padding:10px 20px;border:none;border-radius:6px;background:#40739e;color:white;cursor:pointer;transition:0.2s;}
button:hover{opacity:0.8;}

/* MESSAGGI */
.message{margin-top:12px; padding:10px 12px; border-radius:8px; display:inline-block;}
.message.success{background:#dff6dd; color:#1b5e20;}
.message.error{background:#fde2e1; color:#b71c1c;}

/* GRAFICO */
canvas{width:100% !important; max-height:420px;}

/* TOAST */

#expiry_toasts{
  position: fixed;
  bottom: 20px;
  right: 20px;
  display: flex;
  flex-direction: column;
  gap: 10px;
  z-index: 9999;
}
#expiry_toasts{
  position: fixed !important;
  bottom: 20px !important;
  right: 20px !important;
  z-index: 99999 !important;
}

.expiry_toast{background:#e84118;color:white;padding:12px 18px;border-radius:6px;font-weight:bold;box-shadow:0 4px 12px rgba(0,0,0,0.3);opacity:0; transform:translateX(100%);animation:slideIn 0.5s forwards;}
@keyframes slideIn{to{opacity:1;transform:translateX(0);}}
@keyframes slideOut{to{opacity:0;transform:translateX(100%);}}

@media(max-width:900px){.dashboard-cards{flex-direction:column;}}

/* TAB TRANSITION MODERNA */
.tab{
  position:relative;
  opacity:0;
  transform:translateY(10px);
  pointer-events:none;
  transition:opacity 0.25s ease, transform 0.25s ease;
  display:block; /* sempre block */
}

.tab.active{
  opacity:1;
  transform:translateY(0);
  pointer-events:auto;
}

/* Nascondiamo visivamente ma senza rompere layout */
.tab:not(.active){
  position:absolute;
  width:100%;
}

.lot-chip{
  background:#90ce96;
  border:1px solid #c2dac7;
  padding:6px 10px;
  border-radius:999px;
  cursor:pointer;
  font-size:0.9em;
}
.lot-chip:hover{ opacity:0.45; }

/* PRODOTTI TAB */
.products-grid{
  display:grid;
  grid-template-columns:repeat(auto-fill,minmax(320px,1fr));
  gap:18px;
}

.product-card{
  background:white;
  border-radius:14px;
  padding:18px;
  box-shadow:0 6px 18px rgba(0,0,0,0.08);
  display:flex;
  flex-direction:column;
  gap:10px;
  transition:0.2s;
}
.product-card:hover{
  transform:translateY(-4px);
  box-shadow:0 10px 24px rgba(0,0,0,0.12);
}

.product-header{
  display:flex;
  align-items:center;
  gap:12px;
}

.product-img{
  width:60px;
  height:60px;
  object-fit:cover;
  border-radius:10px;
  background:#f1f1f1;
}

.product-name{
  font-weight:bold;
  font-size:1.05em;
}

.product-meta{
  font-size:0.9em;
  color:#555;
}

.product-stock{
  font-weight:bold;
  font-size:1.1em;
  color:#273c75;
}

.product-actions{
  display:flex;
  gap:8px;
  margin-top:6px;
}

.btn-small{
  padding:6px 10px;
  font-size:0.85em;
  border-radius:6px;
}

.btn-danger{
  background:#e84118;
  color:white;
}
.btn-danger:hover{opacity:0.85;}

/* CREA PRODOTTO CARD */
.product-create-card{
  background:white;
  padding:24px;
  border-radius:16px;
  box-shadow:0 10px 28px rgba(0,0,0,0.08);
  margin-bottom:30px;
}

.product-create-card h3{
  margin-bottom:18px;
  color:#273c75;
}

.create-grid{
  display:grid;
  grid-template-columns:repeat(auto-fit,minmax(200px,1fr));
  gap:12px;
  margin-bottom:18px;
}

.btn-create{
  background:#273c75;
  font-weight:bold;
}
.btn-create:hover{
  background:#192a56;
}

.product-card input{
  border:1px solid #ddd;
  padding:6px 8px;
  border-radius:6px;
  margin-bottom:6px;
  width:100%;
}

.product-card input:focus{
  border-color:#273c75;
  outline:none;
}

.hidden{
  display:none;
}

.product-info{
  flex:1;
}

.btn-cancel{
  background:#777;
  color:white;
}
.btn-cancel:hover{
  opacity:0.8;
}

/* EDIT MODE HIGHLIGHT */
.product-card.editing{
  border:2px solid #40739e;
  box-shadow:0 0 0 4px rgba(64,115,158,0.15);
  transition:0.2s ease;
}

/* SAVE SUCCESS ANIMATION */
.product-card.saved{
  animation:saveFlash 0.6s ease;
}

@keyframes saveFlash{
  0%{ box-shadow:0 0 0 0 rgba(76,175,80,0); }
  30%{ box-shadow:0 0 0 6px rgba(76,175,80,0.4); }
  100%{ box-shadow:0 0 0 0 rgba(76,175,80,0); }
}

